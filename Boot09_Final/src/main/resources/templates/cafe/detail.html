<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>/cafe/detail.html</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</head>
<body>
	<div class="container">
		<nav>
		  <ol class="breadcrumb">
	        <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
		    <li class="breadcrumb-item"><a th:href="@{/cafe/list}">Cafe</a></li>
		    <li class="breadcrumb-item active">Detail</li>
		  </ol>
		</nav>
		<a th:if="${dto.prevNum ne 0}" th:href="@{/cafe/detail(num=${dto.prevNum},condition=${dto.condition},keyword=${dto.keyword})}">이전글</a>
		<a th:if="${dto.nextNum ne 0}" th:href="@{/cafe/detail(num=${dto.nextNum},condition=${dto.condition},keyword=${dto.keyword})}">다음글</a>
		<p th:if="${not #strings.isEmpty(dto.keyword)}">
			<strong>[[${dto.condition}]]</strong> 조건
			<strong>[[${dto.keyword}]]</strong> 검색어로 검색된 내용 
		</p>
		<h3>글 상세 보기</h3>
			<table class="table table-bordered">
			<tr>
				<th>글번호</th>
				<td th:text="${dto.num}"></td>
			</tr>
			<tr>
				<th>작성자</th>
				<td th:text="${dto.writer}"></td>
			</tr>
			<tr>
				<th>제목</th>
				<td th:text="${dto.title}"></td>
			</tr>
			<tr>
				<th>조회수</th>
				<td th:text="${dto.viewCount}"></td>	
			</tr>
			<tr>
				<th>작성일</th>
				<td th:text="${dto.regdate}"></td>
			</tr>
			<tr>
				<td colspan="2">
					<!--<textarea cols="30" rows="10">[[${dto.content}]]</textarea>-->
					<div th:text="${dto.content}"></div>
				</td>
			</tr>
		</table>
		<th:block th:if="${dto.writer eq id}">
			<a class="btn btn-outline-success btn-sm" th:href="@{/cafe/updateform(num=${dto.num})}">수정</a>
			<a class="btn btn-outline-danger btn-sm" href="javascript:" onclick="deleteConfirm()">삭제</a>
			<script th:inline="javascript">
				let id=[[${id}]];
				let dto=[[${dto}]];
				let contextPath=[[@{/}]];
				//역슬레시 제거하기
				contextPath=contextPath.replace("\\","");
				contextPath2="[(@{/})]"
				
				function deleteConfirm(){
					
					const isDelete=confirm("이 글을 삭제 하겠습니까?");
					if(isDelete){
						//javascript 를 이용해서 페이지 이동 시키기
						//location.href="/cafe/delete?num=[[${dto.num}]]"; 이것도 되고
						location.href=contextPath+"cafe/delete?num="+dto.num;
					}
					
				}
			</script>
			
			
		</th:block>
		
	</div>
</body>
</html>